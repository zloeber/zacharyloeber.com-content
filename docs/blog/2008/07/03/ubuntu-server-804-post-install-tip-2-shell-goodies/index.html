<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="Zachary Loeber">
        <meta name="description" content="Zachary Loeber&#39;s Personal Site">
        <meta name="keywords" content="blog,personal,devops,infrastructure,code,cloud,Azure,AWS,Kubernetes,Docker">
        <meta name="generator" content="Hugo 0.59.1" />
        <title> Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies | Zachary Loeber</title>
        <meta name="description" content="Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies - Zachary Loeber&#39;s Personal Site">
        <meta itemprop="name" content="Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies">
        <meta itemprop="description" content="Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies - Zachary Loeber&#39;s Personal Site">
        <meta property="og:title" content="Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies">
        <meta property="og:description" content="Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies - Zachary Loeber&#39;s Personal Site">
        <meta property="og:image" content="https://www.gravatar.com/avatar/48fc6231ab6cad25f101a82e5932d9dd?size=200">
        <meta property="og:url" content="https://zacharyloeber.com/blog/2008/07/03/ubuntu-server-804-post-install-tip-2-shell-goodies/">
        <meta property="og:site_name" content="Zachary Loeber">
        <meta property="og:type" content="article">
        <link rel="icon" type="image/png" href="https://zacharyloeber.com/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="https://zacharyloeber.com/favicon-16x16.png" sizes="16x16">

	
	  <link href="/blog/2008/07/03/ubuntu-server-804-post-install-tip-2-shell-goodies/" rel="alternate" type="application/rss+xml" title="Zachary Loeber" />
	  <link href="/blog/2008/07/03/ubuntu-server-804-post-install-tip-2-shell-goodies/" rel="feed" type="application/rss+xml" title="Zachary Loeber" />
	

        
        
        
        
        <link rel="stylesheet" href="/sass/combined.min.5f50be91a665634f9dfed5900bc388393fc430e3369d58e73b8375457a6df832.css">

        

        
            
                <link rel="stylesheet" href="https://zacharyloeber.com/css/mermaid.css">
            
        
    </head>
    <body class="bilberry-hugo-theme">
        
<nav class="permanentTopNav">

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="/" target="">Home</a></li>
                
            
                
                    <li><a href="https://zacharyloeber.com/page/about/">About</a></li>
                
            
                
                    <li><a href="https://zacharyloeber.com/page/about-me/">About Me</a></li>
                
            
        </ul>

        
    </div>
</nav>


        <header>
    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="https://www.gravatar.com/avatar/48fc6231ab6cad25f101a82e5932d9dd?d=mm&size=200" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title"><a href="/">Zachary Loeber</a></h3>
            
                <span class="subtitle">The personal website of Zachary Loeber.</span>
            
        </div>

    

        
        <div class="toggler permanentTopNav">
        
            <i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </div>
</header>


        <div class="main container">
            
     
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="https://zacharyloeber.com/blog/2008/07/03/ubuntu-server-804-post-install-tip-2-shell-goodies/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="https://zacharyloeber.com/blog/2008/07/03/ubuntu-server-804-post-install-tip-2-shell-goodies/">Ubuntu Server 8.04 Post Install Tip #2: Shell Goodies</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2008-07-03</span>
            
        

        
            <span class="readingTime">3 min read</span>
        

        
            <span class="categories">
                
                    <a href="/categories/uncategorized">Uncategorized</a>
                
            </span>
        

        
            <span class="author"><a href="/author/zachary-loeber">Zachary Loeber</a></span>
        
    </div>

    
        <p>OK, I promised a friend some time ago that I&#8217;d post all of my post-install procedures and I&#8217;ve not quite followed through with that so I&#8217;m doing a few before finishing up my three part post on the &#8220;Home Hacker&#8217;s Network&#8221;. These are all just little hacks I&#8217;ve come across and modified to suit my needs. I like this one a bunch as it gives me a nice shell prompt when I login as well as when I use screen (although the gnu screen configuration part is mutually exclusive to the shell modification part).</p>

<p>So lets get started&#8230;</p>

<p>I got this nice prompt script from <a href="http://www.iml.ece.mcgill.ca/~stephan/bash_pompt">http://www.iml.ece.mcgill.ca/~stephan/bash_pompt</a></p>

<p><code>nano ~/myprompt.env</code></p>

<p>Add the following and save</p>

<pre><code>#!/bin/bash
function myprompt
{
local NONE='\[\033[0m\]'
local WHITE_1='\[\033[0;1m\]'
local BLACK='\[\033[0;30m\]'
local GRAY='\[\033[1;30m\]'
local RED='\[\033[0;31m\]'
local LIGHT_RED='\[\033[1;31m\]'
local GREEN='\[\033[0;32m\]'
local LIGHT_GREEN='\[\033[1;32m\]'
local BROWN='\[\033[0;33m\]'
local YELLOW='\[\033[1;33m\]'
local BLUE='\[\033[0;34m\]'
local LIGHT_BLUE='\[\033[1;34m\]'
local PURPLE='\[\033[0;35m\]'
local LIGHT_PURPLE='\[\033[1;35m\]'
local CYAN='\[\033[0;36m\]'
local LIGHT_CYAN='\[\033[0;1;36m\]'
local LIGHT_GRAY='\[\033[0;37m\]'
local WHITE='\[\033[1;37m\]'

local BRACE_COLOR=$NONE
local LBRACE=$BRACE_COLOR[$BRACE_COLOR
local RBRACE=$BRACE_COLOR]$BRACE_COLOR
local SYMBOL
local PWD=&quot;\W&quot;

if [ `whoami` = root ]; then
#echo 'ROOT USER'
SYMBOL=&quot;#&quot;
else
#echo 'NON-ROOT USER'
SYMBOL=&quot;\$&quot;
fi

if [[ $1 = &quot;-h&quot; || $1 = &quot;--help&quot; || $1 = &quot;-?&quot; ]]; then
echo &quot;USAGE:&quot;
echo &quot; stephan_prompt [-s | -l]&quot;
echo &quot; &quot;
echo &quot;DESCRIPTION:&quot;
echo &quot; Format the PS1 prompt string to have colors.&quot;
echo &quot; &quot;
echo &quot; -s, --short&quot;
echo &quot; Default option shows the path as a truncated.&quot;
echo &quot; &quot;
echo &quot; -l, --long&quot;
echo &quot; Show the full path in the prompt. Same as the pwd command&quot;
echo &quot; &quot;
echo &quot; -?, -h, --help&quot;
echo &quot; Display usage options&quot;
echo &quot; &quot;
else

if [[ $1 = &quot;--short&quot; || $1 = &quot;-s&quot; ]]; then
#echo &quot;setting path display to short&quot;
PWD=&quot;\W&quot;
fi

if [[ $1 = &quot;--long&quot; || $1 = &quot;-l&quot; ]]; then
#echo &quot;setting path display to long&quot;
PWD=&quot;\w&quot;
fi
fi

#PS1=&quot;$LBRACE\
#$LIGHT_BLUE\$(date +%H:%M)\
#$RBRACE\
#$LBRACE\
PS1=&quot;$LBRACE\
$GREEN\u\
$WHITE@\
$LIGHT_PURPLE\h\
$WHITE:\
$LIGHT_RED$PWD\
$RBRACE\
$LIGHT_PURPLE$SYMBOL$NONE &quot;
}
</code></pre>

<p>A quick note here, the prompt is defined by the last statement starting at PS1=, you can change this as you see fit, the &#8220;&amp;#8221; is an escape character and will be needed at the end of every line. the author conveniently defined all the colors at the top of the script. Typical bash escape characters apply so \h = hostname of machine and \u = username. Uncomment the first 4 lines of PS1 and remove the second PS1 line to add the time at the beginning of the prompt.</p>

<p>Fix up your bash profile by sourcing the above file at each login and by adding a few more sysadmin type paths.</p>

<p><code>nano ~/.bash_profile</code></p>

<p>add the following and save:</p>

<p><code>export PATH=$PATH:/sbin:/usr/sbin:/usr/local/sbin:/usr/share&lt;br /&gt;
source ~/myprompt.env&lt;br /&gt;
myprompt</code></p>

<blockquote>
<p>Note: Ok, the previous instructions work just fine on a headless system which, consequently, is what I base my write-ups on. But to be true to the rules of bash you should actually put the previous code at the end of ~/.bashrc</p>
</blockquote>

<p>Now make screen act a bit nicer when you open new screens (if, that is, you use screen like every good geek should do)</p>

<p><code>sudo apt-get install screen&lt;br /&gt;
sudo nano /etc/screenrc</code></p>

<p>Add this at the very end:</p>

<p><code># make the shell in every window a login shell&lt;br /&gt;
shell -$SHELL</code></p>

<p><strong>explanation:</strong>Screen does not source .bash_profile by default as a new screen is not a new login screen but just a derivative of the current running screen. This fixes that so we have nice paths and prompts with new windows in screen. If you are a hard core screen user you can do other things like set it up to start up multiple screens and run a program in each one when you start up screen. Maybe more on that later?</p>
    
</div>

    
<div class="footer no-tags">


    

    
</div>

</article>

        
    </div>

    
        
    

     

        </div>

        
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
                <ul>
                
                    <li>
                        <a href="https://zacharyloeber.com/blog/2019/12/8/hugo-a-devops-approach/">Hugo - A DevOps Approach</a>
                    </li>
                
                    <li>
                        <a href="https://zacharyloeber.com/blog/2018/12/10/devops-tool-of-the-day-syncthing/">Devops: Tool of the day – Syncthing</a>
                    </li>
                
                    <li>
                        <a href="https://zacharyloeber.com/blog/2018/09/28/devops-automating-kubernetes-deployments/">DevOps – Automating Kubernetes Deployments</a>
                    </li>
                
                </ul>
        </div>
        

        
        <div class="categories">
            <a href="/categories/"><strong>Categories</strong></a>
                <ul>
                
                    <li>
                        <a href="/categories/system-administration">System administration (130)</a>
                    </li>
                
                    <li>
                        <a href="/categories/microsoft">Microsoft (120)</a>
                    </li>
                
                    <li>
                        <a href="/categories/powershell">Powershell (106)</a>
                    </li>
                
                    <li>
                        <a href="/categories/networking">Networking (52)</a>
                    </li>
                
                    <li>
                        <a href="/categories/active-directory">Active directory (44)</a>
                    </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>

                
                
                    <a href="https://twitter.com/zloeber" target="_blank"><i class="fa fa-twitter-adblock-proof"></i></a>
                
                
                
                
                
                
                
                
                
                    <a href="https://github.com/zloeber" target="_blank"><i class="fa fa-github"></i></a>
                
                
                    <a href="https://www.linkedin.com/in/zloeber/" target="_blank"><i class="fa fa-linkedin"></i></a>
                
            </div>
            

            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/zloeber" target="_blank">
                &copy;
                
                    2019
                
                by Zachary Loeber
            </a>
	    
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme" target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


        

        

        
        
        <script type="text/javascript" src="/js/externalDependencies.39c47e10e241eae2947b3fe21809c572.js" integrity="md5-OcR&#43;EOJB6uKUez/iGAnFcg=="></script>

        
        
        <script type="text/javascript" src="/js/theme.ff50ae6dc1bfc220b23bf69dbb41b54e.js" integrity="md5-/1CubcG/wiCyO/adu0G1Tg=="></script>

        <script>
            $(".moment").each(function() {
                $(this).text(
                    moment( $(this).text() )
                        .locale( "en" )
                        .format('LL')
                );
            });

            $(".footnote-return sup").html("");
        </script>

        
            
                <script src="https://zacharyloeber.com/js/mermaid.js" type="application/javascript"></script>
            
        

        


    </body>
</html>
