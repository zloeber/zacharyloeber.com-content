<!doctype html>
<html class="no-js" lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="author" content="">
        <meta name="description" content="">
        <meta name="keywords" content="">
        <meta name="generator" content="Hugo 0.53" />
        <title> BIG-IP: Load Balancer Upgrade | </title>
        <meta name="description" content="BIG-IP: Load Balancer Upgrade - %!s(&lt;nil&gt;)">
        <meta itemprop="name" content="BIG-IP: Load Balancer Upgrade">
        <meta itemprop="description" content="BIG-IP: Load Balancer Upgrade - %!s(&lt;nil&gt;)">
        <meta property="og:title" content="BIG-IP: Load Balancer Upgrade">
        <meta property="og:description" content="BIG-IP: Load Balancer Upgrade - %!s(&lt;nil&gt;)">
        <meta property="og:image" content="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?size=200">
        <meta property="og:url" content="https://zacharyloeber.com/blog/2009/12/07/big-ip-load-balancer-upgrade/">
        <meta property="og:site_name" content="">
        <meta property="og:type" content="article">
        <link rel="icon" type="image/png" href="https://zacharyloeber.com/favicon-32x32.png" sizes="32x32">
        <link rel="icon" type="image/png" href="https://zacharyloeber.com/favicon-16x16.png" sizes="16x16">

	

        
        
        
        
        <link rel="stylesheet" href="/sass/combined.min.5aca3dc995ccd40fd537c60ccb5ce5882145ec5d4c4827c15f277667981cc0de.css">

        

        
    </head>
    <body class="bilberry-hugo-theme">
        
<nav>

    <div class="container">
        <ul class="topnav">
            
                
                    <li><a href="https://github.com/zloeber" target="_blank">Github</a></li>
                
            
                
                    <li><a href="/page/about/">About</a></li>
                
            
                
                    <li><a href="/page/about-me/">About Me</a></li>
                
            
        </ul>

        
    </div>
</nav>


        <header>
    <div class="container">
        <div class="logo">
            <a href="/" class="logo">
                
                    <img src="https://www.gravatar.com/avatar/d41d8cd98f00b204e9800998ecf8427e?d=mm&size=200" alt="">
                

                <span class="overlay"><i class="fa fa-home"></i></span>
            </a>
        </div>
        <div class="titles">
            <h3 class="title"><a href="/">My cool new blog</a></h3>
            
        </div>

    

        
        <div class="toggler">
        
            <i class="fa fa-bars" aria-hidden="true"></i>
        </div>
    </div>
</header>


        <div class="main container">
            
     
    <div class="article-wrapper u-cf single">
        
            <a class="bubble" href="/blog/2009/12/07/big-ip-load-balancer-upgrade/">
    <i class="fa fa-fw fa-pencil"></i>
</a>

<article class="default article">
    

    <div class="content">
    <h3><a href="/blog/2009/12/07/big-ip-load-balancer-upgrade/">BIG-IP: Load Balancer Upgrade</a></h3>
    <div class="meta">
        
            
                <span class="date moment">2009-12-07</span>
            
        

        

        
            <span class="categories">
                
                    <a href="/categories/big-ip">BIG-IP</a>
                
                    <a href="/categories/linux">Linux</a>
                
                    <a href="/categories/networking">Networking</a>
                
                    <a href="/categories/system-administration">System Administration</a>
                
            </span>
        

        
            <span class="author"><a href="/author/zachary-loeber">Zachary Loeber</a></span>
        
    </div>

    
        <p>I had the pleasure of doing an F5 BIG-IP load balancer upgrade recently and am happy with the way the F5 people have designed their systems for fail over. Essentially you will use different system partitions to host different versions of their product and you change which one you want to boot to after updating the inactive partition. This, theoretically, means you can always go back to a working configuration if something goes awry. I&#8217;m unhappy with how fragmented their documentation is in getting from point A to point B though. Here is a quick rundown of what I had to do&#8230;</p>

<p>Remote into your bigip management interface as an administration account then get to root</p>

<p>su &#8211;</p>

<p>Save your license file information just in case</p>

<p>cat bigip.license</p>

<p>Download your iso upgrade image and copy it to /shared/images with something like winscp for windows or just scp for linux. If the images directory doesn&#8217;t exist you must create it first (so they say in the docs)</p>

<p>If you are on an old version like me (9.x.x) you will have to run im ./shared/images/youriso.iso to extract and install the new upgrade utility. This will also show you active vs. an inactive drives:</p>

<p><code>[admin@bigip2:Active] config # su -&lt;br /&gt;
[admin@bigip2:Active] config # cd /shared/images/&lt;br /&gt;
[admin@bigip2:Active] images # im ./BIGIP-10.0.1.283.0.iso&lt;br /&gt;
/tmp/rpmdisk.ursNzQ /shared/images&lt;br /&gt;
info: system has tm_install-2.5.0-80.0&lt;br /&gt;
info: system has perl-RPM2-0.67-10.0.1.283.0&lt;br /&gt;
The im utility is no longer used to upgrade software images.&lt;br /&gt;
Please use 'image2disk'. For help, use 'image2disk -h'.&lt;br /&gt;
You must always install to an image location that is not in use.&lt;br /&gt;
Here is your current image-location status:&lt;br /&gt;
bigip.license   CF1.1 active no default no title BIG-IP 9.3.0 Build 178.5&lt;br /&gt;
HD1.1 active yes default yes title BIG-IP 9.4.5 Build 1049.10&lt;br /&gt;
HD1.2 active no default no title BIG-IP 10.0.1 Build 283.0</code></p>

<p>So you see that I&#8217;ll be installing (or rather already installed to) HD1.2. You may have to find and clear out old images if you are short on space. There /shared directory is literally shared between partitions so clearing from the live system from that location will clear from both install partitions. If you are ready then install like so:</p>

<p><code>[admin@bigip2:Active] images # image2disk --instslot=HD1.2 ./BIGIP-10.0.1.283.0.iso</code></p>

<p>After I did this it complained about a license file check and said I had to run with the &#8211;nvlicenseok option. So I did:</p>

<p><code>[admin@bigip2:Active] images # image2disk --instslot=HD1.2 --nvlicenseok ./BIGIP-10.0.1.283.0.iso</code></p>

<p>When all was done you have to make that partition the default and reboot to it.</p>

<p><code>switchboot</code></p>

<p><code>reboot</code></p>
    
</div>

    
<div class="footer no-tags">


    

    
</div>

</article>

        
    </div>

    
        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "zacharyloeber-com" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    

     

        </div>

        
<footer>
    <div class="container">

        
        <div class="recent-posts">
            <strong>Latest posts</strong>
                <ul>
                
                    <li>
                        <a href="/blog/2018/12/10/devops-tool-of-the-day-syncthing/">Devops: Tool of the day – Syncthing</a>
                    </li>
                
                    <li>
                        <a href="/blog/2018/09/28/devops-automating-kubernetes-deployments/">DevOps – Automating Kubernetes Deployments</a>
                    </li>
                
                    <li>
                        <a href="/blog/2018/05/02/powershell-to-python-notes-from-the-field/">Powershell To Python Notes From The Field</a>
                    </li>
                
                    <li>
                        <a href="/blog/2018/03/26/powershell-windows-subsystem-for-linux/">PowerShell: Windows Subsystem For Linux</a>
                    </li>
                
                    <li>
                        <a href="/blog/2018/02/24/email-reputation-and-design-a-condensed-guide/">Email Reputation and Design: A Condensed Guide</a>
                    </li>
                
                    <li>
                        <a href="/blog/2018/02/04/powershell-azuread-dynamic-groups/">PowerShell: AzureAD Dynamic Groups</a>
                    </li>
                
                    <li>
                        <a href="/blog/2018/01/10/powershell-office-365-group-based-licencing-cleanup/">PowerShell: Office 365 Group Based Licencing Cleanup</a>
                    </li>
                
                </ul>
        </div>
        

        
        <div class="categories">
            <a href="/categories/"><strong>Categories</strong></a>
                <ul>
                
                    <li>
                        <a href="/categories/system-administration">System administration (130)</a>
                    </li>
                
                    <li>
                        <a href="/categories/microsoft">Microsoft (120)</a>
                    </li>
                
                    <li>
                        <a href="/categories/powershell">Powershell (106)</a>
                    </li>
                
                    <li>
                        <a href="/categories/networking">Networking (52)</a>
                    </li>
                
                    <li>
                        <a href="/categories/active-directory">Active directory (44)</a>
                    </li>
                
                    <li>
                        <a href="/categories/exchange">Exchange (38)</a>
                    </li>
                
                    <li>
                        <a href="/categories/exchange-2010">Exchange 2010 (38)</a>
                    </li>
                
            </ul>
        </div>
        

        <div class="right">
            
            <div class="external-profiles">
                <strong>Social media</strong>

                
                
                
                
                
                
                
                
                
                
                
            </div>
            

            
        </div>
    </div>
</footer>


<div class="credits">
    <div class="container">
        <div class="copyright">
            <a href="https://github.com/Lednerb" target="_blank">
                &copy;
                
                    2018
                
                by Lednerb
            </a>
	    
        </div>
        <div class="author">
            <a href="https://github.com/Lednerb/bilberry-hugo-theme" target="_blank">Bilberry Hugo Theme</a>
        </div>
    </div>
</div>


        

        

        
        
        <script type="text/javascript" src="/js/externalDependencies.39c47e10e241eae2947b3fe21809c572.js" integrity="md5-OcR&#43;EOJB6uKUez/iGAnFcg=="></script>

        
        
        <script type="text/javascript" src="/js/theme.ff50ae6dc1bfc220b23bf69dbb41b54e.js" integrity="md5-/1CubcG/wiCyO/adu0G1Tg=="></script>

        <script>
            $(".moment").each(function() {
                $(this).text(
                    moment( $(this).text() )
                        .locale( "en" )
                        .format('LL')
                );
            });

            $(".footnote-return sup").html("");
        </script>

        

        


    </body>
</html>
